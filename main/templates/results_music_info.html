{% extends "base.html" %}
{% load static %}

{% block title %}Music_info{% endblock %}

{% block extra_head %}
<link rel="stylesheet" href="{% static 'css/results_music_info.css' %}">
{% endblock %}

{% block content %}
<div class="results-container">
  <!-- ğŸ” ê²€ìƒ‰ì°½ -->
  <div class="search-box" id="searchBox">
    <input type="search" placeholder="ì™€ ì”¨ ê·¸ëƒ¥ ì§‘ì— ê°€ê³  ì‹¶ë‹¤" />
    <button><i class="fa-solid fa-magnifying-glass"></i></button>
  </div>

  <!-- ğŸ¯ Grid ë ˆì´ì•„ì›ƒ -->
  <div class="results-grid">
    <!-- (1,1): ì•¨ë²” ì»¤ë²„ -->
    <div class="album-cover">
      <img src="{{ song.cover_url }}" alt="ì•¨ë²” ì»¤ë²„">
    </div>

    <!-- (1,2): ê³¡ ì •ë³´ -->
    <div class="song-info">

      <!-- ë™ê±´ ë³€ê²½ -->
      <div class="title-row">
        <h2 class="song-title">{{ song.title }}</h2>
        <div class="like-wrapper">
          <button id="likeButton" class="like-btn" data-title="{{ song.title }}" data-artist="{{ song.artist }}">
            {% if is_liked %}â¤ï¸{% else %}ğŸ¤{% endif %}
          </button>
          <span id="likeCountDisplay">
            <span id="likeCountValue">{{ like_count|default:"0" }}</span>ëª…
          </span>
        </div>
      </div>

      <div class="info-row">
        <span class="label">ê°€ìˆ˜</span>
        <span class="colon">:</span>
        <span class="value">{{ song.artist }}</span>
      </div>

      <div class="info-row">
        <span class="label">ë°œë§¤ì¼</span>
        <span class="colon">:</span>
        <span class="value">{{ song.release_date }}</span>
      </div>

      <div class="info-row">
        <span class="label">ì¥ë¥´</span>
        <span class="colon">:</span>
        <span class="value">{{ song.genre }}</span>
      </div>

      <div class="info-row tag-row">
        <span class="label">ê³¡ íƒœê·¸</span>
        <span class="colon">:</span>
        <span class="value">
          {% if song.keywords %}
          {% for tag in song.keywords %}
          <a href="/search/?q={{ tag|urlencode }}" class="tag-btn">{{ tag }}</a>
          {% endfor %}
          {% else %}
          ì—†ìŒ
          {% endif %}
        </span>
      </div>

      <div class="info-row">
        <span class="label">ê°ì • íƒœê·¸</span>
        <span class="colon">:</span>
        <span class="value">
          {% if song.emotion_tags %}
          {% for tag in song.emotion_tags %}
          <a href="/search/?q={{ tag|urlencode }}" class="tag-btn">{{ tag }}</a>
          {% endfor %}
          {% else %}
          ì—†ìŒ
          {% endif %}
        </span>
      </div>
    </div>
    <!-- ë™ê±´ ë³€ê²½ ë -->


    <!-- (1~2,3): ì¢‹ì•„ìš” ëª©ë¡ -->
    <div class="like-box">
      <h3 class="like-box-title">â¤ï¸ ì¢‹ì•„ìš” ëª©ë¡</h3>
      <div class="like-box-scroll">
        <ul class="like-list" id="likeList">
          {% for liked_song in liked_songs %}
          <li>
            <a href="/music-info/?title={{ liked_song.title|urlencode }}&artist={{ liked_song.artist|urlencode }}">
              <strong>{{ liked_song.title }}</strong><br>
              <span class="artist-name">{{ liked_song.artist }}</span>
            </a>
          </li>
          {% empty %}
          <li>ì¢‹ì•„ìš”í•œ ê³¡ì´ ì—†ìŠµë‹ˆë‹¤.</li>
          {% endfor %}
        </ul>
      </div>
    </div>

    <!-- (2,1~2): ê°€ì‚¬ -->
    <div class="lyrics-box">
      <h3> ê°€ì‚¬</h3><br>
      <div id="lyrics-preview">
        {% for line in song.lyrics.splitlines %}
        <div>{{ line }}</div>
        {% endfor %}
      </div>
      <button id="toggle-lyrics" class="toggle-lyrics-btn">ë”ë³´ê¸° â–¼</button>
    </div>
  </div>
</div>

<script src="{% static 'js/main.js' %}"></script>
{% endblock %}