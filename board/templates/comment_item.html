<div class="{% if comment.parent %}reply{% else %}comment{% endif %}">
  <!-- ðŸ‘¤ ìž‘ì„±ìž + ì‹œê°„ -->
  <div class="comment-header">
    <span class="comment-author">{{ comment.user.nickname }}</span>
    <span class="comment-time">{{ comment.created_at|date:"Y.m.d H:i" }}</span>
  </div>

  <!-- ðŸ’¬ ëŒ“ê¸€ ë‚´ìš© -->
  <div class="comment-body">{{ comment.text }}</div>

  <!-- ðŸ§© ë²„íŠ¼ ì˜ì—­ -->
  <div class="comment-actions">
    <button class="toggle-replies-btn" data-parent-id="{{ comment.id }}">â–¼</button>
    <button class="reply-btn" data-id="{{ comment.id }}">ë‹µê¸€</button>
    {% if user == comment.user %}
      <form method="post" action="{% url 'delete_comment' comment.id %}" style="display:inline;">
        {% csrf_token %}
        <button type="submit">ì‚­ì œ</button>
      </form>
    {% endif %}
  </div>

  <!-- âœï¸ ëŒ€ëŒ“ê¸€ ìž‘ì„± í¼ -->
  <form method="post" action="{% url 'comment_reply' comment.id %}" class="reply-form hidden" id="reply-form-{{ comment.id }}">
    {% csrf_token %}
    <input type="text" name="text" placeholder="ë‹µê¸€ì„ ìž…ë ¥í•˜ì„¸ìš”" required>
    <button type="submit">ìž‘ì„±</button>
  </form>

  <!-- ðŸ“Ž ëŒ€ëŒ“ê¸€ ëª©ë¡ -->
  <div class="replies" id="reply-container-{{ comment.id }}">
    {% for reply in comment.replies.all %}
      <div class="reply hidden" id="reply-{{ reply.id }}">
        <div class="comment-header">
          <span class="comment-author">{{ reply.user.nickname }}</span>
          <span class="comment-time">{{ reply.created_at|date:"Y.m.d H:i" }}</span>
        </div>
        <div class="comment-body">{{ reply.text }}</div>
        
        <!-- ðŸ§© ëŒ€ëŒ“ê¸€ ì‚­ì œ ë²„íŠ¼ -->
        {% if user == reply.user %}
        <div class="comment-actions">
          <form method="post" action="{% url 'delete_comment' reply.id %}" style="display:inline;">
            {% csrf_token %}
            <button type="submit">ì‚­ì œ</button>
          </form>
        </div>
        {% endif %}
      </div>
    {% endfor %}
  </div>
</div>
